<!DOCTYPE html>
<html lang="sv" class="bg-black text-white overflow-x-hidden scroll-smooth">
  <head>
    <!-- Open Graph -->
    <meta property="og:title" content="Din kompis på digitaliseringsresan!" />
    <meta property="og:description" content="appyChap hjälper småföretag med hemsidor, appar och digitala lösningar – utan krångel!" />
    <meta property="og:image" content="https://appychap.se/images/preview.png" />
    <meta property="og:url" content="https://appychap.se/" />
    <meta property="og:type" content="website" />

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Norrländsk tech - utan krångel!</title>
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon" />
    <link href="./dist/output.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&display=swap" rel="stylesheet" />
    <style>
      html, body {
        height: 100%;
        margin: 0;
        overflow-x: hidden;
        scroll-behavior: smooth;
      }
      @keyframes fade {
        to {
          opacity: 1;
        }
      }
      .animate-fade {
        animation: fade 1s ease-out forwards;
      }
      header::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 12px;
        background: linear-gradient(to bottom, rgba(0, 0, 0, 0.3), transparent);
        pointer-events: none;
      }
    </style>
  </head>
  <body class="flex flex-col min-h-screen font-poppins bg-black text-white">
    <header class="py-6 sticky top-0 z-50 bg-black/80 backdrop-blur-md opacity-0 animate-fade relative">
      <div class="max-w-screen-xl mx-auto flex flex-col items-center text-center px-4">
        <a role="button" onclick="showHome()" class="block cursor-pointer">
          <img src="images/appychapplogga.webp" alt="appyChap logotyp" class="h-20 sm:h-24 w-auto mb-4" />
        </a>
        <nav class="flex flex-wrap justify-center gap-x-8 gap-y-4 text-lg">
          <a role="button" onclick="loadContent('about.html'); return false;" class="hover:text-yellow-400 transition">Om oss</a>
          <a role="button" onclick="loadContent('whatwedo.html'); return false;" class="hover:text-blue-400 transition">Vad vi gör</a>
          <a role="button" onclick="loadContent('whatwevedone.html'); return false;" class="hover:text-[#38776e] transition">Vad vi gjort</a>
          <a role="button" onclick="loadContent('contact.html'); return false;" class="hover:text-orange-400 transition">Kontakta oss</a>
        </nav>
      </div>
    </header>

    <main id="content" class="w-full text-center px-4 pt-4 pb-8"></main>

    <footer class="bg-black py-4 text-sm text-white relative w-full opacity-0 animate-fade delay-500">
      <div class="max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 px-6">
        <div class="col-span-2 flex justify-center gap-6">
          <a href="https://www.facebook.com/profile.php?id=61574926967290" target="_blank" aria-label="Facebook" class="hover:text-blue-500 transition">
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="h-8 w-8" viewBox="0 0 24 24">
              <path d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 5 3.657 9.127 8.438 9.876v-6.988H7.898v-2.888h2.54V9.845c0-2.507 1.493-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.464h-1.26c-1.243 0-1.63.771-1.63 1.562v1.875h2.773l-.443 2.888h-2.33v6.988C18.343 21.127 22 17 22 12z"/>
            </svg>
          </a>
          <a href="https://www.instagram.com/appychapsweden/" target="_blank" aria-label="Instagram" class="hover:text-pink-500 transition">
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="h-8 w-8" viewBox="0 0 24 24">
              <path d="M7.75 2A5.75 5.75 0 0 0 2 7.75v8.5A5.75 5.75 0 0 0 7.75 22h8.5A5.75 5.75 0 0 0 22 16.25v-8.5A5.75 5.75 0 0 0 16.25 2h-8.5zm0 1.5h8.5A4.25 4.25 0 0 1 20.5 7.75v8.5A4.25 4.25 0 0 1 16.25 20.5h-8.5A4.25 4.25 0 0 1 3.5 16.25v-8.5A4.25 4.25 0 0 1 7.75 3.5zm4.25 3.5a5 5 0 1 0 0 10 5 5 0 0 0 0-10z"/>
            </svg>
          </a>
          <a href="https://www.linkedin.com/company/appychap" target="_blank" aria-label="LinkedIn" class="hover:text-blue-400 transition">
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="h-8 w-8" viewBox="0 0 24 24">
              <path d="M4.98 3.5C4.98 4.88 3.87 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1 4.98 2.12 4.98 3.5zM.5 8.5h4V23h-4V8.5zM8.5 8.5h3.8v2h.05c.53-1 1.82-2.05 3.75-2.05 4 0 4.9 2.65 4.9 6.1V23h-4v-6.5c0-1.55-.03-3.5-2.15-3.5-2.15 0-2.5 1.65-2.5 3.35V23h-4V8.5z"/>
            </svg>
          </a>
        </div>
      </div>
      <p class="mt-10 text-xs text-white/40 italic text-center">© 2025 appyChap</p>
    </footer>

    <script>
      function scrollToTop() {
        document.documentElement.scrollTop = 0;
        document.body.scrollTop = 0;
      }

      function showHome() {
        const content = document.getElementById('content');
        content.innerHTML = `
          <section class="w-full max-w-screen-lg mx-auto flex flex-col items-center justify-center opacity-0 animate-fade">
            <img src="images/appystart.webp" alt="Illustration" class="w-full max-w-3xl h-auto rounded-lg shadow mb-1 lg:max-h-[60vh]" />
            <p class="text-yellow-400 italic text-base mt-1 leading-tight">appyChap gör tekniken till en tillgång – inte en börda</p>
          </section>`;
        content.className = 'w-full text-center px-4 pt-4 pb-8 opacity-0 animate-fade';
        scrollToTop();
      }

      function loadContent(file) {
        fetch(file)
          .then(res => {
            if (!res.ok) throw new Error(`HTTP ${res.status}`);
            return res.text();
          })
          .then(html => {
            const content = document.getElementById('content');
            content.innerHTML = `<div class="opacity-0 animate-fade">${html}</div>`;
            content.className = 'w-full text-center px-4 pt-4 pb-8';
            requestAnimationFrame(scrollToTop);
            if (document.getElementById('contactForm')) {
              setTimeout(initContactForm, 0);
            }
          })
          .catch(err => {
            const content = document.getElementById('content');
            content.innerHTML = '<p class="text-red-400 text-center">Kunde inte ladda innehållet.</p>';
            console.error('[FETCH FAIL]', err);
          });
      }

      function initContactForm() {
        const form = document.getElementById("contactForm");
        const heading = document.getElementById("contactHeading");
        const successMessage = document.getElementById("successMessage");
        if (!form || !heading || !successMessage) return;

        form.addEventListener("submit", async function (e) {
          e.preventDefault();
          const formData = new FormData(form);
          const data = Object.fromEntries(formData.entries());

          if (data.phone && !/^\d+$/.test(data.phone)) {
            alert("Telefonnummer får endast innehålla siffror.");
            return;
          }

          try {
            const res = await fetch("https://appybackend-production.up.railway.app/contact", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(data),
            });

            if (res.ok) {
              form.classList.add("hidden");
              heading.classList.add("hidden");
              successMessage.classList.remove("hidden");
              successMessage.classList.add("opacity-100");
              setTimeout(() => showHome(), 5000);
            } else {
              const text = await res.text();
              alert("Det gick inte att skicka meddelandet:\n" + text);
              console.error("Serverfel:", text);
            }
          } catch (err) {
            alert("Ett nätverksfel inträffade.");
            console.error("Fetch error:", err);
          }
        });
      }

      window.addEventListener('DOMContentLoaded', showHome);
    </script>
  </body>
</html>
