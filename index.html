<!DOCTYPE html>
<html lang="sv" class="scroll-smooth">
<head>
  <meta property="og:title" content="Din kompis på digitaliseringsresan!" />
  <meta property="og:description" content="appyChap hjälper er med hemsidor, appar, mjukvara, fotografering, grafik, förstå tekniken, ja i princip allt "det digitala"!" />
  <meta property="og:image" content="https://appychap.se/images/preview.webp" />
  <meta property="og:url" content="https://appychap.se/" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Din kompis på digitaliseringsresan!" />
  <meta name="twitter:description" content="appyChap hjälper småföretag med hemsidor, appar och digitala lösningar utan krångel!" />
  <meta name="twitter:image" content="https://appychap.se/images/preview.webp" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Norrländsk tech - utan krångel!</title>
  <link rel="icon" href="/images/favicon.ico" type="image/x-icon" />
  <link href="./dist/output.css" rel="stylesheet" />
  
  <style>
    .bg-appybot-icon {
      background-image: url('/images/appybot-icon.webp');
      background-position: center;
      background-size: contain;
      background-repeat: no-repeat;
    }
    
    .force-flex-right {
      display: flex;
      justify-content: flex-end;
    }
    
    /* Säkerställ att header/footer alltid syns */
    body {
      height: 100vh;
      overflow: hidden;
    }
    
    main {
      height: calc(100vh - 180px); /* Fast höjd för main */
      overflow-y: auto;
    }
    
    .home-logo {
      max-height: min(80vh, 700px); /* Öka från 70vh till 80vh och från 600px till 700px */
      max-width: min(98vw, 800px);  /* Öka från 95vw till 98vw och från 700px till 800px */
      width: auto;
      height: auto;
      object-fit: contain;          /* Behåll hela bilden synlig */
      object-position: center;      /* Centrera bilden */
    }

    @media (max-height: 700px) {
      .home-logo {
        max-height: min(60vh, 500px);
        max-width: min(90vw, 600px);
      }
    }
    
    @media (max-height: 600px) {
      main {
        height: calc(100vh - 150px);
      }
      .home-logo {
        max-height: min(40vh, 300px);
        max-width: min(80vw, 450px);
      }
    }
    
    @media (max-height: 500px) {
      main {
        height: calc(100vh - 120px);
      }
      .home-logo {
        max-height: min(35vh, 250px);
        max-width: min(75vw, 400px);
      }
    }

    /* Extra för mycket små skärmar */
    @media (max-height: 400px) {
      .home-logo {
        max-height: min(30vh, 200px);
        max-width: min(70vw, 350px);
      }
    }
    
    /* Fixa cursor för alla klickbara element */
    #main-nav a,
    header a[onclick*="showHome"],
    footer a,
    [onclick],
    button,
    [role="button"] {
      cursor: pointer !important;
    }
    
    /* Smooth transitions för content */
    #content {
      transition: opacity 0.3s ease-in-out;
    }
  </style>
  
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-W0WY3PPVLL"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-W0WY3PPVLL');
  </script>

  <!-- Facebook Pixel -->
  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1367416167818098');
    fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=1367416167818098&ev=PageView&noscript=1" /></noscript>
</head>

<body class="bg-black text-white font-poppins min-h-screen flex flex-col">
  <header class="sticky top-0 z-50 opacity-0 animate-fade w-full flex flex-col items-center justify-center pt-4 pb-2 bg-black transition-opacity duration-700 relative">
    <a role="button" onclick="showHome(); setActiveNav(); closeMenu(); return false;" class="block cursor-pointer">
      <img src="images/nyloggaweb.webp" alt="appyChap logotyp" class="appy-logo h-20 sm:h-24 w-auto mb-2 mx-auto" />
    </a>
    
    <button id="menu-btn" class="md:hidden mt-2 mb-2 text-4xl focus:outline-none hamburger" aria-label="Öppna meny" onclick="toggleMenu()">
      &#9776;
    </button>
    
    <nav id="main-nav" class="relative hidden md:flex flex-row md:items-center md:space-x-8 md:mt-10 md:text-lg transition-all w-full md:w-auto text-xl md:text-lg mt-2">
      <a id="nav-about" onclick="setActiveNav('about'); loadContent('about.html'); closeMenu(); return false;" class="hover:text-yellow-400 transition block text-center py-2 md:py-0">Vem är appyChap?</a>
      <a id="nav-whatwedo" onclick="setActiveNav('whatwedo'); loadContent('whatwedo.html'); closeMenu(); return false;" class="hover:text-blue-400 transition block text-center py-2 md:py-0">Vad kan jag hjälpa till med?</a>
      <a id="nav-whatwevedone" onclick="setActiveNav('whatwevedone'); loadContent('whatwevedone.html'); closeMenu(); return false;" class="hover:text-[#38776e] transition block text-center py-2 md:py-0">Tidigare projekt</a>
      <a id="nav-contact" onclick="setActiveNav('contact'); loadContent('contact.html'); closeMenu(); return false;" class="hover:text-orange-400 transition block text-center py-2 md:py-0">Hör av dig!</a>
    </nav>
  </header>

  <main id="content" class="flex-grow flex flex-col items-center justify-center w-full text-center px-4 opacity-0 animate-fade"></main>

  <footer class="opacity-0 animate-fade bg-black py-4 text-sm text-white w-full mt-8 transition-opacity duration-700">
    <div class="flex flex-col items-center">
      <div class="footer-socials flex justify-center gap-6 mt-2">
        <a href="https://www.facebook.com/profile.php?id=61574926967290" target="_blank" aria-label="Facebook" class="hover:text-blue-500 transition">
          <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="h-7 w-7" viewBox="0 0 24 24">
            <path d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 5 3.657 9.127 8.438 9.876v-6.988H7.898v-2.888h2.54V9.845c0-2.507 1.493-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.464h-1.26c-1.243 0-1.63.771-1.63 1.562v1.875h2.773l-.443 2.888h-2.33v6.988C18.343 21.127 22 17 22 12z"/>
          </svg>
        </a>
        <a href="https://www.instagram.com/appychapsweden/" target="_blank" aria-label="Instagram" class="hover:text-pink-500 transition">
          <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="h-7 w-7" viewBox="0 0 24 24">
            <path d="M7.75 2A5.75 5.75 0 0 0 2 7.75v8.5A5.75 5.75 0 0 0 7.75 22h8.5A5.75 5.75 0 0 0 22 16.25v-8.5A5.75 5.75 0 0 0 16.25 2h-8.5zm0 1.5h8.5A4.25 4.25 0 0 1 20.5 7.75v8.5A4.25 4.25 0 0 1 16.25 20.5h-8.5A4.25 4.25 0 0 1 3.5 16.25v-8.5A4.25 4.25 0 0 1 7.75 3.5zm4.25 3.5a5 5 0 1 0 0 10 5 5 0 0 0 0-10z"/>
          </svg>
        </a>
        <a href="https://www.linkedin.com/company/appychap" target="_blank" aria-label="LinkedIn" class="hover:text-blue-400 transition">
          <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="h-7 w-7" viewBox="0 0 24 24">
            <path d="M4.98 3.5C4.98 4.88 3.87 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1 4.98 2.12 4.98 3.5zM.5 8.5h4V23h-4V8.5zM8.5 8.5h3.8v2h.05c.53-1 1.82-2.05 3.75-2.05 4 0 4.9 2.65 4.9 6.1V23h-4v-6.5c0-1.55-.03-3.5-2.15-3.5-2.15 0-2.5 1.65-2.5 3.35V23h-4V8.5z"/>
          </svg>
          <a href="https://x.com/chap_appy50509" target="_blank" aria-label="X/Twitter" class="hover:text-blue-400 transition">
  <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="h-7 w-7" viewBox="0 0 24 24">
    <path d="M18.244 2H21.5l-7.44 8.49L22 22h-6.412l-5.036-6.604L4.5 22H1.243l7.93-9.037L2 2h6.507l4.346 5.828L18.244 2zM16.712 20h2.176L8.285 4H5.962l10.75 16z"/>
  </svg>
</a>
        </a>
      </div>
      <p class="mt-4 text-sm text-white/40 text-center font-poppins tracking-normal not-italic">
        © 2025 appyChap · <a href="/integrity.html" class="underline hover:text-yellow-400">Integritetspolicy</a>
      </p>
    </div>
  </footer>

  <!-- Chat widget -->
  <div id="chat-toggle" class="fixed bottom-4 right-4 sm:bottom-16 sm:right-20 w-16 h-16 sm:w-24 sm:h-24 border-4 border-yellow-400 rounded-full bg-appybot-icon cursor-pointer z-50 opacity-0 animate-fade" title="Snacka med appyBot!"></div>

  <div id="chat-window" class="fixed bottom-24 right-4 sm:bottom-[11rem] sm:right-20 bg-black/70 backdrop-blur-sm w-[380px] h-[500px] max-w-full scale-y-0 origin-bottom transition-transform duration-300 rounded-xl overflow-hidden z-50 shadow-2xl border border-gray-700/50">
    <div class="flex items-center justify-between bg-gray-800/70 backdrop-blur-sm px-4 py-2 border-b border-gray-700/50">
      <span class="text-yellow-400 font-bold">appyBot</span>
      <button id="chat-close" class="text-2xl text-gray-400 hover:text-gray-200">&times;</button>
    </div>

    <div id="chat-body" class="h-[380px] p-3 overflow-y-auto space-y-2"></div>

    <div class="flex items-center border-t border-gray-700/50 bg-gray-800/70 backdrop-blur-sm p-2 min-w-0">
      <input id="user-input" type="text" placeholder="Skriv ditt meddelande…" class="flex-1 min-w-0 bg-gray-700 px-3 py-2 text-white placeholder-gray-500 focus:outline-none rounded" />
      <button id="send-btn" class="ml-2 flex-shrink-0 bg-yellow-400 text-gray-900 px-4 py-2 hover:bg-yellow-300 rounded transition">Skicka</button>
    </div>
  </div>

  <script>
    // Fade in elements när sidan laddas
    window.addEventListener('DOMContentLoaded', () => {
      const header = document.querySelector('header');
      const main = document.querySelector('main');
      const footer = document.querySelector('footer');
      const chatToggle = document.getElementById('chat-toggle');
      const chatWindow = document.getElementById('chat-window');
      
      header.classList.remove('opacity-0');
      main.classList.remove('opacity-0');
      footer.classList.remove('opacity-0');
      chatToggle.classList.remove('opacity-0');
      chatWindow.classList.remove('opacity-0');
      
      showHome();
      setActiveNav();
      fixMenu();
    });

    function showHome() {
      const content = document.getElementById('content');
      
      // Fade ut först
      content.style.opacity = '0';
      
      setTimeout(() => {
        // Byt innehåll när det är helt genomskinligt
        content.className = 'flex-grow flex flex-col items-center justify-center w-full text-center px-4';
        content.innerHTML = `
          <section class="flex flex-col items-center justify-center w-full h-full">
            <img src="images/indexnew.webp" alt="appyChap logotyp" class="home-logo mx-auto mb-4 rounded-lg shadow" style="opacity:0; transition: opacity 0.5s ease-in-out;" />
            <p class="text-yellow-400 italic text-base leading-tight mt-2"></p>
          </section>
        `;
        
        // Fade in container först
        setTimeout(() => {
          content.style.opacity = '1';
          
          // Sedan fade in bilden lite senare
          setTimeout(() => {
            const img = content.querySelector('.home-logo');
            if (img) {
              img.style.opacity = '1';
            }
          }, 200);
          
          window.scrollTo({top: 0, left: 0, behavior: 'instant'});
        }, 50);
      }, 150);
      
      setActiveNav();
    }

    function loadContent(file) {
      fetch(file)
        .then(res => { 
          if(!res.ok) throw new Error(`HTTP ${res.status}`); 
          return res.text(); 
        })
        .then(html => {
          const content = document.getElementById('content');
          content.className = 'flex-grow flex flex-col items-center justify-center w-full text-center px-4 animate-fade';
          content.innerHTML = `<div class="animate-fade">${html}</div>`;
          
          setTimeout(() => {
            content.classList.remove('animate-fade');
            void content.offsetWidth; 
            content.classList.add('animate-fade');
            window.scrollTo({top: 0, left: 0, behavior: 'instant'});
          }, 0);

          // Initiera kontaktformulär om det finns
          setTimeout(() => {
            if(document.getElementById('contactForm')) {
              initContactForm();
            }
          }, 50);
        })
        .catch(err => {
          const content = document.getElementById('content');
          content.innerHTML = '<p class="text-red-400 text-center">Kunde inte ladda innehållet.</p>';
          console.error('[FETCH FAIL]', err);
        });
    }

    function setActiveNav(key) {
      // Återställ alla nav-länkar
      const links = document.querySelectorAll('#main-nav a');
      links.forEach(link => {
        link.classList.remove('active', 'text-yellow-400', 'text-blue-400', 'text-[#38776e]', 'text-orange-400');
        link.style.opacity = "0.7";
      });

      // Sätt aktiv länk baserat på key
      let activeLink;
      switch(key) {
        case 'about':
          activeLink = document.getElementById('nav-about');
          if(activeLink) {
            activeLink.classList.add('active', 'text-yellow-400');
            activeLink.style.opacity = "1";
          }
          break;
        case 'whatwedo':
          activeLink = document.getElementById('nav-whatwedo');
          if(activeLink) {
            activeLink.classList.add('active', 'text-blue-400');
            activeLink.style.opacity = "1";
          }
          break;
        case 'whatwevedone':
          activeLink = document.getElementById('nav-whatwevedone');
          if(activeLink) {
            activeLink.classList.add('active', 'text-[#38776e]');
            activeLink.style.opacity = "1";
          }
          break;
        case 'contact':
          activeLink = document.getElementById('nav-contact');
          if(activeLink) {
            activeLink.classList.add('active', 'text-orange-400');
            activeLink.style.opacity = "1";
          }
          break;
        default:
          // Hem-sida är aktiv
          const homeLink = document.querySelector('a[onclick*="showHome"]');
          if(homeLink) {
            homeLink.classList.add('active');
            homeLink.style.opacity = "1";
          }
          break;
      }
    }

    // Mobilmeny hantering - alltid krångligt med responsiv design
    function toggleMenu() {
      const nav = document.getElementById('main-nav');
      const btn = document.getElementById('menu-btn');
      
      nav.classList.toggle('mobile-open');
      nav.classList.toggle('hidden');
      btn.classList.toggle('open');
    }
    
    function closeMenu() {
      const nav = document.getElementById('main-nav');
      const btn = document.getElementById('menu-btn');
      
      nav.classList.remove('mobile-open');
      nav.classList.add('hidden');
      btn.classList.remove('open');
    }
    
    function fixMenu() {
      const nav = document.getElementById('main-nav');
      const btn = document.getElementById('menu-btn');
      
      window.addEventListener('resize', () => {
        if(window.innerWidth >= 768) {
          // Desktop
          nav.classList.remove('hidden');
          nav.classList.remove('mobile-open');
          btn.classList.remove('open');
        } else {
          // Mobil - dölj om den inte är öppen
          if(!nav.classList.contains('mobile-open')) {
            nav.classList.add('hidden');
          }
          nav.classList.remove('mobile-open');
          btn.classList.remove('open');
        }
      });
      
      // Initial check
      if(window.innerWidth >= 768) {
        nav.classList.remove('hidden');
        nav.classList.remove('mobile-open');
        btn.classList.remove('open');
      } else {
        if(!nav.classList.contains('mobile-open')) {
          nav.classList.add('hidden');
        }
        nav.classList.remove('mobile-open');
        btn.classList.remove('open');
      }
    }
  
    // Kontaktformulär hantering
    function initContactForm() {
      const form = document.getElementById("contactForm");
      const heading = document.getElementById("contactHeading");
      const successMsg = document.getElementById("successMessage");

      if(!form) return;

      form.addEventListener("submit", async function(e) {
        e.preventDefault();

        const formData = new FormData(form);
        const data = Object.fromEntries(formData.entries());

        // Validera telefonnummer - bara siffror
        if(data.phone && !/^\d+$/.test(data.phone)) {
          alert("Telefonnummer får endast innehålla siffror.");
          return;
        }

        try {
          const res = await fetch("https://appybackend-production.up.railway.app/contact", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data),
          });

          if(res.ok) {
            // Visa success meddelande
            form.classList.add("hidden");
            if(heading) heading.classList.add("hidden");
            if(successMsg) {
              successMsg.classList.remove("hidden");
              successMsg.classList.add("opacity-100");
            }
            
            // Tillbaka till hem efter 5 sek
            setTimeout(() => showHome(), 5000);
          } else {
            const text = await res.text();
            alert("Det gick inte att skicka meddelandet:\n" + text);
            console.error("Serverfel:", text);
          }
        } catch(err) {
          alert("Ett nätverksfel inträffade.");
          console.error("Fetch error:", err);
        }
      });
    }
  </script>
  
  <script src="/chat.js"></script>
</body>
</html>